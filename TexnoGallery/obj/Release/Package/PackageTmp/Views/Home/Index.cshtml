@using TexnoGallery.ViewModel.Default
@model DefaultViewModel


<!--Slider-->
@*<section id="container">
    <div id="slider-container">
        <ul class="images-container">
            @foreach (var slideItem in Model.SlideImage)
            {
                <li>
                    <img class="slide-img" src="@slideItem.SlideImg">
                </li>
            }


        </ul>
        <span class="arrow a-left"></span>
        <span class="arrow a-right"></span>
        <div class='bullets-container'></div>
    </div>
</section>*@
<div class="container-fluid">
    <div class="mob-category mt-2 mb-2">
        <button id="mob-categ">Məhsul Kataloqu</button>
        <div class="mob-all-categ">
            <ul class="mob-categ-ul">
                @foreach (var item in Model.CategoryName)
                {
                    <li class="mob-categ-li">@item.Name
                        <ul class="mob-sub-categ">

                            <p class="mt-2" style="color:#ffc107;">@item.Name</p>
                            @foreach (var subitem in item.SubCategories)
                            {
                                <li>
                                    <a href="@Url.Action("product","product",new { subId=subitem.Id,id=item.Id})">@subitem.Name</a>
                                </li>
                            }
                        </ul>
                </li>
                }
                <li>Pc Topla</li>
                </ul>
        </div>
    </div>
</div>
<div class="container-fluid mt-4">
    <div class="row">
        <div class="col-lg-3 col-xl-2 mt-3">
            <div class="category">
                <ul class="main-categ">
                    @foreach (var item in Model.CategoryName)
                    {
                        <li class="categ-li">
                            <a href="@Url.Action("product","product",new { id=item.Id})" >@item.Name</a>
                            <ul class="sub_categ">
                                <h5 class="text-center mt-2" style="color:#ffc107; font-weight:700">@item.Name</h5>
                                @foreach (var subitem in item.SubCategories)
                                {  
                                <li>
                                    <a href="@Url.Action("product","product",new { subId=subitem.Id,id=item.Id})">* @subitem.Name</a>
                                </li>
                                }
                                </ul>
                        </li>
                    }
                <li class="categ-li">
                    <a href="@Url.Action("pctopla","product")">Pc Topla</a>
                </li>
                    </ul>
            </div>
        </div>
        <div class="col-lg-9 col-xl-10">
            <div class="slider">
                <div class="slider__wrapper">
                    @foreach (var slideItem in Model.SlideImage)
                    {
                        <div class="slider__item">

                            <img class="slider_img" src="@slideItem.SlideImg" />

                        </div>
                    }
                </div>
                <a class="slider__control slider__control_left" href="#" role="button"></a>
                <a class="slider__control slider__control_right" href="#" role="button"></a>
            </div>
        </div>
    </div>
</div>

<!--End of the Slider-->
<!--Category-->
<section id="category" class="pc-category">
    <div class="container-fluid text-center mt-5 mb-5">
        <div class="row">
            @foreach (var catItem in Model.CategoryName)
            {

                <div class="col-md-4 col-sm-6 col-6 col-lg-3 mb-3">
                    <a class="text-white " href="@Url.Action("product","Product",new { id=catItem.Id,title=Html.ClearnUrl(catItem.Name)})">
                        <div class="all-categ" style="background-image: url(@catItem.CategoryImg)">
                            <div class="categ-content">
                                <h2>@catItem.Name</h2>
                                @Html.Raw(@catItem.Description)
                            </div>
                        </div>
                    </a>
                </div>
            }
        </div>
    </div>
</section>
<!--End of the Category-->
<!--Products-->
<section id="products" class="products mt-5 mb-5">
    <div class="container">
        <h2>Yeni Məhsullar</h2>
    </div>
    <div class="container-fluid slide-bord">
        <hr>
        <div class="owl-carousel owl-theme">
            @foreach (var item in Model.productList)
            {
                <div class="item">
                    <a href="@Url.Action("Details","Product",new { id=item.Id,title=Html.ClearnUrl(item.Name)})" style="color:black;">
                        <div class="ImageDiv" style="height:230px;padding:25px;background:#fff">
                            <img src="@item.Image" alt="Texno" style="height:100%; width:100%;object-fit:contain">
                        </div>
                        <div class="slide-title text-center">
                            <h3>@item.Price Azn</h3>
                            <p>@item.Name</p>
                        </div>
                    </a>
                </div>
            }
        </div>
        <hr>
    </div>

    <div class="container mt-5">
        <h2>Endirimli Məhsullar</h2>
    </div>
    <div class="container-fluid slide-bord">
        <hr>
        <div class="owl-carousel owl-theme">
            @foreach (var item in Model.productList)
            {
                <div class="item">
                    <a href="@Url.Action("Details","Product",new { id=item.Id})" style="color:black;">
                        <div class="ImageDiv" style="height:230px;padding:25px;background:#fff">
                            <img src="@item.Image" alt="Texno" style="height:100%; width:100%;object-fit:contain">
                        </div>
                        <div class="slide-title text-center">
                            <h3>@item.Price Azn</h3>
                            <p>@item.Name</p>
                        </div>
                    </a>
                </div>
            }

        </div>
        <hr>
    </div>

    <div class="container mt-5">
        <h2>Ən Çox Satılan Məhsullar</h2>

    </div>
    <div class="container-fluid slide-bord">
        <hr>
        <div class="owl-carousel owl-theme">
            @foreach (var item in Model.productList)
            {
                <div class="item">
                    <a href="@Url.Action("Details","Product",new { id=item.Id})" style="color:black;">
                        <div class="ImageDiv" style="height:230px;padding:25px;background:#fff">
                            <img src="@item.Image" alt="Texno" style="height:100%; width:100%;object-fit:contain">
                        </div>
                        <div class="slide-title text-center">
                            <h3>@item.Price Azn</h3>
                            <p>@item.Name</p>
                        </div>
                    </a>
                </div>
            }
        </div>
        <hr>
    </div>



</section>

<!--Brands-->
<section id="brands">
    <div class="container mt-5">
        <h2>Brendlər</h2>

    </div>
    <div class="container-fluid slide-bord  mb-5 ">
        <hr>
        <div class="owl-carousel owl-theme">
            @foreach (var BrendPh in Model.BrendPhoto)
            {
                <div class="item pl-5" style="width: 150px">
                    <img class="img-responsive" src="@BrendPh.BrendImg">
                </div>
            }
        </div>
    </div>
</section>
<!--End of the Brands-->
<!--Statistics-->
@*<section id="stat" class="stat mb-5">
    <div class="container-fluid">
        <div class="row text-center text-white">
            <div class="col-md-4">
                <div class="stat-items">
                    <i class="fas fa-chart-line"></i>
                    <h2 class="mt-2 mb-2">
                        <span class="counter text-center">2500</span>
                        <span>+</span>
                    </h2>
                    <p>Site Visits</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-items">
                    <i class="far fa-smile-beam"></i>
                    <h2 class="mt-2 mb-2">
                        <span class="counter text-center">1720</span>
                        <span>+</span>
                    </h2>
                    <p>Happy Clients</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-items">
                    <i class="fas fa-chart-line"></i>
                    <h2 class="mt-2 mb-2">
                        <span class="counter text-center">2500</span>
                        <span>+</span>
                    </h2>
                    <p>Site Visits</p>
                </div>
            </div>


        </div>
    </div>
</section>*@
<!--End of the Statistics-->
<!--Services-->
<section id="services">
    <div class="Services mb-5">
        <div class="container-fluid bg-white">
            <div class="row pt-5 pb-5">
                <div class="col-md-4 col-sm-4">
                    <div class="serv text-center">
                        <div class="serv-icon text-center">
                            <i class="fas fa-shipping-fast fa-3x pt-4 serv-img"></i>
                        </div>
                        <div class="serv-title">
                            <h5>PULSUZ ÇATDIRILMA</h5>
                            <p>Şəhər daxili pulsuz çatdırılma.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-4">
                    <div class="serv text-center">
                        <div class="serv-icon text-center">
                            <i class="fas fa-lock fa-3x pt-4 serv-img"></i>
                        </div>
                        <div class="serv-title">
                            <h5>ZƏMANƏT</h5>
                            <p>Alınan bütün mallara zəmanət.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-4">
                    <div class="serv text-center">
                        <div class="serv-icon text-center">
                            <i class="fas fa-history fa-3x pt-4 serv-img"></i>
                        </div>
                        <div class="serv-title">
                            <h5>ONLAYN DƏSTƏK 24/7</h5>
                            <p>Hər zaman online dəstək.</p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>
<!--End of the Services-->
<!-- map -->
<section id="map">
    <div class="container pb-5">
        <div class="row">
            <div class="col-md-7" data-aos="fade-right">
                <div class="mapouter" style="width: 100%">
                    <div class="gmap_canvas" style="width: 100%">
                        <iframe style="width:100%" height="500" id="gmap_canvas"
                                src="https://maps.google.com/maps?q=texno%20gallery&t=&z=13&ie=UTF8&iwloc=&output=embed"
                                frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe><a href="https://www.pureblack.de">Pureblack.de - Webseite erstellen lassen</a>
                    </div>
                    <style>
                        .mapouter {
                            position: relative;
                            text-align: right;
                            height: 500px;
                            width: 1080px;
                        }

                        .gmap_canvas {
                            overflow: hidden;
                            background: none !important;
                            height: 500px;
                            width: 1080px;
                        }
                    </style>
                </div>
            </div>
            <div class="col-md-5" data-aos="fade-left">
                <div class="question">
                    <h4>Bizə Sualınız</h4>
                    <form>
                        <div class="form-group">
                            <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="Name">
                            <br>
                            <input type="email" class="form-control" id="exampleFormControlInput1" placeholder="Email">
                        </div>
                        <div class="form-group">
                            <textarea class="form-control" id="exampleFormControlTextarea1" rows="11"
                                      placeholder="Message"></textarea>
                        </div>
                        <button type="button" class="btn question-btn">Mesaj Göndər</button>
                    </form>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- map end -->
@section CartJs{

    <script src="~/FrontPublic/js/cart.js"></script>
}
@section mainJs{
    <script src="~/FrontPublic/js/tilt.jquery.js" type="text/javascript"></script>
    @*<script src="~/FrontPublic/js/jquery.counterup.min.js"></script>
    <script src="~/FrontPublic/js/jquery.waypoints.min.js"></script>*@
    <script src="~/FrontPublic/js/owl.carousel.js" type="text/javascript"></script>
    <script src="~/FrontPublic/js/main.js"></script>

}
<script>
   
     'use strict';
    var multiItemSlider = (function () {

      function _isElementVisible(element) {
        var rect = element.getBoundingClientRect(),
          vWidth = window.innerWidth || doc.documentElement.clientWidth,
          vHeight = window.innerHeight || doc.documentElement.clientHeight,
          elemFromPoint = function (x, y) { return document.elementFromPoint(x, y) };
        if (rect.right < 0 || rect.bottom < 0
          || rect.left > vWidth || rect.top > vHeight)
          return false;
        return (
          element.contains(elemFromPoint(rect.left, rect.top))
          || element.contains(elemFromPoint(rect.right, rect.top))
          || element.contains(elemFromPoint(rect.right, rect.bottom))
          || element.contains(elemFromPoint(rect.left, rect.bottom))
        );
      }

      return function (selector, config) {
        var
          _mainElement = document.querySelector(selector), 
          _sliderWrapper = _mainElement.querySelector('.slider__wrapper'), 
          _sliderItems = _mainElement.querySelectorAll('.slider__item'),
          _sliderControls = _mainElement.querySelectorAll('.slider__control'), 
          _sliderControlLeft = _mainElement.querySelector('.slider__control_left'), 
          _sliderControlRight = _mainElement.querySelector('.slider__control_right'), 
          _wrapperWidth = parseFloat(getComputedStyle(_sliderWrapper).width),
          _itemWidth = parseFloat(getComputedStyle(_sliderItems[0]).width),    
          _positionLeftItem = 0,
          _transform = 0,
          _step = _itemWidth / _wrapperWidth * 100, 
          _items = [],
          _interval = 0,
          _html = _mainElement.innerHTML,
          _states = [
            { active: false, minWidth: 0, count: 1 },
            { active: false, minWidth: 980, count: 2 }
          ],
          _config = {
            isCycling: false, 
            direction: 'right',
            interval: 4000, 
            pause: true 
          };

        for (var key in config) {
          if (key in _config) {
            _config[key] = config[key];
          }
        }

        _sliderItems.forEach(function (item, index) {
          _items.push({ item: item, position: index, transform: 0 });
        });

        var _setActive = function () {
          var _index = 0;
          var width = parseFloat(document.body.clientWidth);
          _states.forEach(function (item, index, arr) {
            _states[index].active = false;
            if (width >= _states[index].minWidth)
              _index = index;
          });
          _states[_index].active = true;
        }

        var _getActive = function () {
          var _index;
          _states.forEach(function (item, index, arr) {
            if (_states[index].active) {
              _index = index;
            }
          });
          return _index;
        }

        var position = {
          getItemMin: function () {
            var indexItem = 0;
            _items.forEach(function (item, index) {
              if (item.position < _items[indexItem].position) {
                indexItem = index;
              }
            });
            return indexItem;
          },
          getItemMax: function () {
            var indexItem = 0;
            _items.forEach(function (item, index) {
              if (item.position > _items[indexItem].position) {
                indexItem = index;
              }
            });
            return indexItem;
          },
          getMin: function () {
            return _items[position.getItemMin()].position;
          },
          getMax: function () {
            return _items[position.getItemMax()].position;
          }
        }

        var _transformItem = function (direction) {
          var nextItem;
          if (!_isElementVisible(_mainElement)) {
            return;
          }
          if (direction === 'right') {
            _positionLeftItem++;
            if ((_positionLeftItem + _wrapperWidth / _itemWidth - 1) > position.getMax()) {
              nextItem = position.getItemMin();
              _items[nextItem].position = position.getMax() + 1;
              _items[nextItem].transform += _items.length * 100;
              _items[nextItem].item.style.transform = 'translateX(' + _items[nextItem].transform + '%)';
            }
            _transform -= _step;
          }
          if (direction === 'left') {
            _positionLeftItem--;
            if (_positionLeftItem < position.getMin()) {
              nextItem = position.getItemMax();
              _items[nextItem].position = position.getMin() - 1;
              _items[nextItem].transform -= _items.length * 100;
              _items[nextItem].item.style.transform = 'translateX(' + _items[nextItem].transform + '%)';
            }
            _transform += _step;
          }
          _sliderWrapper.style.transform = 'translateX(' + _transform + '%)';
        }

        var _cycle = function (direction) {
          if (!_config.isCycling) {
            return;
          }
          _interval = setInterval(function () {
            _transformItem(direction);
          }, _config.interval);
        }

        var _controlClick = function (e) {
          if (e.target.classList.contains('slider__control')) {
            e.preventDefault();
            var direction = e.target.classList.contains('slider__control_right') ? 'right' : 'left';
            _transformItem(direction);
            clearInterval(_interval);
            _cycle(_config.direction);
          }
        };

        var _handleVisibilityChange = function () {
          if (document.visibilityState === "hidden") {
            clearInterval(_interval);
          } else {
            clearInterval(_interval);
            _cycle(_config.direction);
          }
        }

        var _refresh = function () {
          clearInterval(_interval);
          _mainElement.innerHTML = _html;
          _sliderWrapper = _mainElement.querySelector('.slider__wrapper');
          _sliderItems = _mainElement.querySelectorAll('.slider__item');
          _sliderControls = _mainElement.querySelectorAll('.slider__control');
          _sliderControlLeft = _mainElement.querySelector('.slider__control_left');
          _sliderControlRight = _mainElement.querySelector('.slider__control_right');
          _wrapperWidth = parseFloat(getComputedStyle(_sliderWrapper).width);
          _itemWidth = parseFloat(getComputedStyle(_sliderItems[0]).width);
          _positionLeftItem = 0;
          _transform = 0;
          _step = _itemWidth / _wrapperWidth * 100;
          _items = [];
          _sliderItems.forEach(function (item, index) {
            _items.push({ item: item, position: index, transform: 0 });
          });
        }

        var _setUpListeners = function () {
          _mainElement.addEventListener('click', _controlClick);
          if (_config.pause && _config.isCycling) {
            _mainElement.addEventListener('mouseenter', function () {
              clearInterval(_interval);
            });
            _mainElement.addEventListener('mouseleave', function () {
              clearInterval(_interval);
              _cycle(_config.direction);
            });
          }
          document.addEventListener('visibilitychange', _handleVisibilityChange, false);
          window.addEventListener('resize', function () {
            var
              _index = 0,
              width = parseFloat(document.body.clientWidth);
            _states.forEach(function (item, index, arr) {
              if (width >= _states[index].minWidth)
                _index = index;
            });
            if (_index !== _getActive()) {
              _setActive();
              _refresh();
            }
          });
        }

        _setUpListeners();
        if (document.visibilityState === "visible") {
          _cycle(_config.direction);
        }
        _setActive();

        return {
          right: function () { 
            _transformItem('right');
          },
          left: function () { 
            _transformItem('left');
          },
          stop: function () { 
            _config.isCycling = false;
            clearInterval(_interval);
          },
          cycle: function () { 
            _config.isCycling = true;
            clearInterval(_interval);
            _cycle();
          }
        }

      }
    }());

    var slider = multiItemSlider('.slider', {
      isCycling: true
    })
</script>